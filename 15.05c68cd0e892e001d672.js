(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Dp0H:function(t,e,a){"use strict";a.r(e),a.d(e,"MaplestoryDailiesV2Module",function(){return y});var s=a("ofXK"),i=a("tyNb"),r=a("5uKv"),n=a("fXoL"),l=a("jhN1"),c=a("/SLC"),o=a("kN8N"),h=a("Iwn8"),d=a("Ajqu");function p(t,e){if(1&t){const t=n.Mb();n.Lb(0,"app-task-topbar-default",7),n.Sb("changeEvent",function(){return n.hc(t),n.Vb().changeHandler()}),n.Kb()}if(2&t){const t=n.Vb();n.Yb("taskData",t.dailiesData)("topBarTitle","Daily Tracker")("editButtonTitle","Dailies")}}function g(t,e){if(1&t){const t=n.Mb();n.Lb(0,"app-task-topbar-editmode",8),n.Sb("changeEvent",function(){return n.hc(t),n.Vb().changeHandler()})("regionChangeEvent",function(){return n.hc(t),n.Vb().regionChangeHandler()}),n.Kb()}if(2&t){const t=n.Vb();n.Yb("taskData",t.dailiesData)("topBarTitle","Daily Tracker")}}function u(t,e){if(1&t&&(n.Lb(0,"p",9),n.mc(1,"Reset in "),n.Hb(2,"br"),n.mc(3),n.Kb()),2&t){const t=n.Vb();n.wb(3),n.oc(" ",t.timerString,"")}}function m(t,e){1&t&&(n.Lb(0,"div"),n.mc(1,' All dailies are disabled, click on the "Edit Dailies" button to enable dailies. '),n.Kb())}function k(t,e){if(1&t){const t=n.Mb();n.Jb(0),n.Lb(1,"app-task-group",10),n.Sb("changeEvent",function(){return n.hc(t),n.Vb().changeHandler()}),n.Kb(),n.Ib()}if(2&t){const t=e.$implicit,a=n.Vb();n.wb(1),n.Yb("taskData",a.dailiesData)("taskGroup",t)("title",t.title)}}const b=[{path:"",component:(()=>{class t{constructor(t,e){this.titleService=t,this.metaService=e,this.characterIndex=0}ngOnInit(){this.titleService.setTitle("Maplestory Dailies Tracker | Random Stuff"),this.metaService.updateTag({name:"description",content:"A dailies tracker for Maplestory to keep track of your completed daily tasks. Keep track of your dailies across multiple different characters."}),this.metaService.getTag("name='robots'")?this.metaService.updateTag({name:"robots",content:"index, follow"}):this.metaService.addTag({name:"robots",content:"index, follow"}),this.initialise()}ngOnDestroy(){this.timer&&clearInterval(this.timer)}initialise(){localStorage.getItem("dailiesData")?(this.dailiesData=JSON.parse(localStorage.getItem("dailiesData")),this.dailiesData.editModeActive=!1,this.updateChecker(),this.checkIfDataIsFromPreviousDay(),this.checkIfAllGroupsAreDisabled()):localStorage.getItem("dailies")?this.v1v2Updater():this.initiateDataSet(),this.startTimer()}v1v2Updater(){var t={characters:[],version:localStorage.getItem("dailiesVersion"),lastTrackerVisit:localStorage.getItem("lastMapleDailyTrackerVisit"),selectedCharacterIndex:0,mapleRegion:[{resetUtcOffset:0,name:"GMS"},{resetUtcOffset:8,name:"MSEA"},{resetUtcOffset:9,name:"KMS"}][JSON.parse(localStorage.getItem("mapleRegion"))],editModeActive:!1},e=JSON.parse(localStorage.getItem("dailies"));for(let a=0;a<e.length;a++)t.characters.push({characterName:e[a].characterName,taskGroups:[{title:"Daily Bosses",tasks:e[a].dailyBosses,allDisabled:!1},{title:"Daily Tasks",tasks:e[a].dailyTasks,allDisabled:!1},{title:"Arcane River Dailies",tasks:e[a].dailyArcaneRiver,allDisabled:!1}]});this.dailiesData=t,this.changeHandler(),localStorage.removeItem("dailiesVersion"),localStorage.removeItem("lastMapleDailyTrackerVisit"),localStorage.removeItem("dailies"),this.initialise()}initiateDataSet(){var t={characterName:"",taskGroups:[{title:"Daily Bosses",tasks:r.dailyBosses,allDisabled:!1},{title:"Daily Tasks",tasks:r.dailyTasks,allDisabled:!1},{title:"Arcane River Dailies",tasks:r.dailyArcaneRiver,allDisabled:!1}]},e={characters:[],version:r.version,lastTrackerVisit:Date.now().toString(),selectedCharacterIndex:0,mapleRegion:{resetUtcOffset:0,name:"GMS"},editModeActive:!1};for(let a=0;a<4;a++)t.characterName="Char"+(a+1),e.characters[a]=JSON.parse(JSON.stringify(t));this.dailiesData=e,this.changeHandler()}checkIfDataIsFromPreviousDay(){var t=this.calculateResetTime()-864e5;parseInt(this.dailiesData.lastTrackerVisit)<t&&this.resetCompletedValues(),this.dailiesData.lastTrackerVisit=Date.now().toString(),this.changeHandler()}updateChecker(){if(this.dailiesData.version!=r.version){var t=JSON.parse(JSON.stringify(this.dailiesData));this.initiateDataSet();var e=JSON.parse(JSON.stringify(this.dailiesData));for(let a=0;a<t.characters.length;a++){this.dailiesData.characters[a].characterName=t.characters[a].characterName;for(let s=0;s<this.dailiesData.characters[a].taskGroups.length;s++){this.dailiesData.characters[a].taskGroups[s].tasks=[];for(let i=0;i<t.characters[a].taskGroups[s].tasks.length;i++)if("custom"!=t.characters[a].taskGroups[s].tasks[i].type&&"Custom.png"!=t.characters[a].taskGroups[s].tasks[i].image)for(let r=0;r<e.characters[a].taskGroups[s].tasks.length;r++)t.characters[a].taskGroups[s].tasks[i].name==e.characters[a].taskGroups[s].tasks[r].name&&(this.dailiesData.characters[a].taskGroups[s].tasks.push({name:t.characters[a].taskGroups[s].tasks[i].name,image:e.characters[a].taskGroups[s].tasks[r].image,completed:t.characters[a].taskGroups[s].tasks[i].completed,enabled:t.characters[a].taskGroups[s].tasks[i].enabled,type:e.characters[a].taskGroups[s].tasks[r].type,displayCondition:e.characters[a].taskGroups[s].tasks[r].displayCondition}),e.characters[a].taskGroups[s].tasks.splice(r,1));else t.characters[a].taskGroups[s].tasks[i].type="custom","Custom.png"==t.characters[a].taskGroups[s].tasks[i].image&&(t.characters[a].taskGroups[s].tasks[i].image="assets/Games/Maplestory/Tracker/Custom.png"),this.dailiesData.characters[a].taskGroups[s].tasks.push(t.characters[a].taskGroups[s].tasks[i]);for(let t=0;t<e.characters[a].taskGroups[s].tasks.length;t++)this.dailiesData.characters[a].taskGroups[s].tasks.push({name:e.characters[a].taskGroups[s].tasks[t].name,image:e.characters[a].taskGroups[s].tasks[t].image,completed:e.characters[a].taskGroups[s].tasks[t].completed,enabled:e.characters[a].taskGroups[s].tasks[t].enabled,type:e.characters[a].taskGroups[s].tasks[t].type,displayCondition:e.characters[a].taskGroups[s].tasks[t].displayCondition})}}this.dailiesData.version=r.version,this.dailiesData.lastTrackerVisit=Date.now().toString(),this.dailiesData.selectedCharacterIndex=t.selectedCharacterIndex,this.dailiesData.mapleRegion=t.mapleRegion,this.changeHandler()}}startTimer(){clearInterval(this.timer);var t=this.calculateResetTime();this.calculateAndOutPutTime(t-(new Date).getTime()),this.timer=setInterval(()=>{var e=t-(new Date).getTime();this.calculateAndOutPutTime(e),e<0&&(clearInterval(this.timer),this.liveReset())},1e3)}calculateResetTime(){var t=new Date,e=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()+1,0,0,0,0);return(e-=60*this.dailiesData.mapleRegion.resetUtcOffset*60*1e3)<t.getTime()&&(e+=864e5),e}calculateAndOutPutTime(t){if(t<0)this.timerString="RESET!";else{var e=Math.floor(t%864e5/36e5),a=Math.floor(t%36e5/6e4),s=Math.floor(t%6e4/1e3);this.timerString=e+"h "+a+"m "+("00"+s).slice(-2)+"s "}}liveReset(){this.resetCompletedValues(),this.startTimer(),this.dailiesData.lastTrackerVisit=(parseInt(Date.now().toString())+5e3).toString(),this.changeHandler()}resetCompletedValues(){this.dailiesData.characters.forEach(t=>{t.taskGroups.forEach(t=>{t.tasks.forEach(t=>{t.completed=!1})})})}changeHandler(){localStorage.setItem("dailiesData",JSON.stringify(this.dailiesData)),this.checkIfAllGroupsAreDisabled()}checkIfAllGroupsAreDisabled(){this.allGroupsAreDisabled=!this.dailiesData.characters[this.dailiesData.selectedCharacterIndex].taskGroups.some(t=>!t.allDisabled)}regionChangeHandler(){this.checkIfDataIsFromPreviousDay(),this.startTimer()}}return t.\u0275fac=function(e){return new(e||t)(n.Gb(l.c),n.Gb(l.b))},t.\u0275cmp=n.Ab({type:t,selectors:[["app-maplestory-dailies-v2"]],decls:8,vars:5,consts:[[1,"gamePageContent"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent",4,"ngIf"],[3,"taskData","topBarTitle","changeEvent","regionChangeEvent",4,"ngIf"],["class","timer",4,"ngIf"],[1,"dailyGroups"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent"],[3,"taskData","topBarTitle","changeEvent","regionChangeEvent"],[1,"timer"],[3,"taskData","taskGroup","title","changeEvent"]],template:function(t,e){1&t&&(n.Hb(0,"app-maplestory-side-navigation"),n.Lb(1,"div",0),n.lc(2,p,1,3,"app-task-topbar-default",1),n.lc(3,g,1,2,"app-task-topbar-editmode",2),n.lc(4,u,4,1,"p",3),n.Lb(5,"div",4),n.lc(6,m,2,0,"div",5),n.lc(7,k,2,3,"ng-container",6),n.Kb(),n.Kb()),2&t&&(n.wb(2),n.Yb("ngIf",!e.dailiesData.editModeActive),n.wb(1),n.Yb("ngIf",e.dailiesData.editModeActive),n.wb(1),n.Yb("ngIf",!e.dailiesData.editModeActive),n.wb(2),n.Yb("ngIf",e.allGroupsAreDisabled&&!e.dailiesData.editModeActive),n.wb(1),n.Yb("ngForOf",e.dailiesData.characters[e.dailiesData.selectedCharacterIndex].taskGroups))},directives:[c.a,s.k,s.j,o.a,h.a,d.a],styles:[".gamePageContent[_ngcontent-%COMP%]{position:relative}.disableMode[_ngcontent-%COMP%]{width:100px;height:50px}.dailyGroups[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;text-align:center}.timer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;margin:8px 0 0 8px;text-align:center;font-size:16px;padding:3px;border:2px solid var(--game-page-border-color)}.buttonWrapper[_ngcontent-%COMP%]{width:175px;margin:0 auto}.buttonWrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.buttonWrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{float:left}.buttonWrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right}"]}),t})()}];let D=(()=>{class t{}return t.\u0275mod=n.Eb({type:t}),t.\u0275inj=n.Db({factory:function(e){return new(e||t)},imports:[[i.d.forChild(b)],i.d]}),t})();var f=a("I9VR"),v=a("Svul");let y=(()=>{class t{}return t.\u0275mod=n.Eb({type:t}),t.\u0275inj=n.Db({factory:function(e){return new(e||t)},imports:[[s.b,D,f.a,v.a],v.a]}),t})()}}]);