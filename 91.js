"use strict";(self.webpackChunkRandomProject=self.webpackChunkRandomProject||[]).push([[91],{19091:(I,c,s)=>{s.r(c),s.d(c,{MaplestoryDailiesV3Module:()=>S});var l=s(96814),d=s(15251),r=s(69468),t=s(52425),p=s(6593),h=s(86456),g=s(91288),u=s(20140),f=s(70769),_=s(19830);function v(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",8)(1,"p"),t._uU(2,"The daily tracker has been updated!"),t._UZ(3,"br")(4,"br"),t._uU(5," Just a small change, as Cernium dailies are now under one quest, the Burning Cernium task has been removed."),t._UZ(6,"br")(7,"br"),t._uU(8," If you are experiencing issues press the reset button to reset your saved data, if everything is working you can press the dismiss button."),t._UZ(9,"br"),t._uU(10," If this does not resolve your issue please contact me on discord, my username is StarLines. "),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.infoReset())}),t._uU(12,"Reset Data"),t.qZA(),t.TgZ(13,"button",9),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.infoDismiss())}),t._uU(14,"Dismiss"),t.qZA()()}}function D(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"app-task-topbar-default",10),t.NdJ("changeEvent",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeHandler())}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("taskData",e.dailiesData)("topBarTitle","Daily Tracker")("editButtonTitle","Dailies")}}function C(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"app-task-topbar-editmode",11),t.NdJ("changeEvent",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeHandler())})("regionChangeEvent",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.regionChangeHandler())})("addCharacterEvent",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.addCharacter())}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("taskData",e.dailiesData)("topBarTitle","Daily Tracker")("regions",e.regions)}}function x(i,o){if(1&i&&(t.TgZ(0,"p",12),t._uU(1,"Reset in "),t._UZ(2,"br"),t._uU(3),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",e.timerString,"")}}function M(i,o){1&i&&(t.TgZ(0,"div"),t._uU(1,' All dailies are disabled, click on the "Edit Dailies" button to enable dailies. '),t.qZA())}function T(i,o){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-task-group",13),t.NdJ("changeEvent",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeHandler())}),t.qZA(),t.BQk()}if(2&i){const e=o.$implicit,a=t.oxw();t.xp6(1),t.Q6J("taskData",a.dailiesData)("taskGroup",e)("title",e.title)}}const k=[{path:"",component:(()=>{class i{constructor(e,a,n){this.titleService=e,this.metaService=a,this.taskService=n,this.initialisationComplete=!1,this.showInfo=!1,this.characterIndex=0,this.regions=[{resetUtcOffset:0,name:"GMS"},{resetUtcOffset:8,name:"MSEA"},{resetUtcOffset:9,name:"KMS"}]}ngOnInit(){this.titleService.setTitle("Maplestory Dailies Tracker | Random Stuff"),this.metaService.updateTag({name:"description",content:"A dailies tracker for Maplestory to keep track of your completed daily tasks. Keep track of your dailies across multiple different characters."}),this.metaService.getTag("name='robots'")?this.metaService.updateTag({name:"robots",content:"index, follow"}):this.metaService.addTag({name:"robots",content:"index, follow"}),this.initialise()}ngOnDestroy(){this.timer&&clearInterval(this.timer)}initialise(){localStorage.getItem("dailiesDataV3")?(this.dailiesData=JSON.parse(localStorage.getItem("dailiesDataV3")),void 0===this.dailiesData.mapleRegion&&(this.dailiesData.mapleRegion={resetUtcOffset:0,name:"GMS"}),this.dailiesData.editModeActive=!1,this.dailyResetChecker(),this.updateChecker(),this.checkIfAllGroupsAreDisabled()):localStorage.getItem("dailiesData")?(this.dailiesData=this.taskService.v2v3Updater("dailiesData"),this.changeHandler(),this.initialise()):this.dailiesData=this.taskService.initiateDataSet(r,4),this.startTimer(),this.initialisationComplete=!0}dailyResetChecker(){var e=this.calculateResetTime()-864e5;parseInt(this.dailiesData.lastTrackerVisit)<e&&this.taskService.resetCompletionAll(this.dailiesData),this.dailiesData.lastTrackerVisit=Date.now().toString(),this.changeHandler()}updateChecker(){this.dailiesData.version!=r.version&&(this.dailiesData=this.taskService.updateTaskStructure(this.dailiesData,r),this.changeHandler())}startTimer(){clearInterval(this.timer);var e=this.calculateResetTime();this.calculateAndOutPutTime(e-(new Date).getTime()),this.timer=setInterval(()=>{var a=e-(new Date).getTime();this.calculateAndOutPutTime(a),a<0&&(clearInterval(this.timer),this.liveReset())},1e3)}calculateResetTime(){var e=new Date,a=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+1,0,0,0,0);return(a-=60*this.dailiesData.mapleRegion.resetUtcOffset*60*1e3)<e.getTime()&&(a+=864e5),a}calculateAndOutPutTime(e){if(e<0)this.timerString="RESET!";else{var a=Math.floor(e%864e5/36e5),n=Math.floor(e%36e5/6e4),O=Math.floor(e%6e4/1e3);this.timerString=a+"h "+n+"m "+("00"+O).slice(-2)+"s "}}liveReset(){this.taskService.resetCompletionAll(this.dailiesData),this.startTimer(),this.dailiesData.lastTrackerVisit=(parseInt(Date.now().toString())+5e3).toString(),this.changeHandler()}checkIfAllGroupsAreDisabled(){this.allGroupsAreDisabled=!this.dailiesData.characters[this.dailiesData.selectedCharacterIndex].taskGroups.some(e=>!e.allDisabled)}addCharacter(){this.taskService.addCharacter(this.dailiesData,r),this.changeHandler()}infoReset(){localStorage.removeItem("dailies"),localStorage.removeItem("dailiesData"),localStorage.removeItem("dailiesDataV3"),this.initialise(),this.dailiesData.infoVisible=!0}infoDismiss(){this.dailiesData.infoVisible=!1,this.changeHandler()}changeHandler(){localStorage.setItem("dailiesDataV3",JSON.stringify(this.dailiesData)),this.checkIfAllGroupsAreDisabled()}regionChangeHandler(){this.dailyResetChecker(),this.startTimer()}static#t=this.\u0275fac=function(a){return new(a||i)(t.Y36(p.Dx),t.Y36(p.h_),t.Y36(h.M))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-maplestory-dailies-v3"]],decls:9,vars:6,consts:[["class","info",4,"ngIf"],[1,"gamePageContent"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent",4,"ngIf"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent","addCharacterEvent",4,"ngIf"],["class","timer",4,"ngIf"],[1,"dailyGroups"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"info"],[1,"buttonStyle",3,"click"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent","addCharacterEvent"],[1,"timer"],[3,"taskData","taskGroup","title","changeEvent"]],template:function(a,n){1&a&&(t._UZ(0,"app-maplestory-side-navigation"),t.YNc(1,v,15,0,"div",0),t.TgZ(2,"div",1),t.YNc(3,D,1,3,"app-task-topbar-default",2)(4,C,1,3,"app-task-topbar-editmode",3)(5,x,4,1,"p",4),t.TgZ(6,"div",5),t.YNc(7,M,2,0,"div",6)(8,T,2,3,"ng-container",7),t.qZA()()),2&a&&(t.xp6(1),t.Q6J("ngIf",!n.initialisationComplete||n.dailiesData.infoVisible&&n.showInfo),t.xp6(2),t.Q6J("ngIf",!n.dailiesData.editModeActive),t.xp6(1),t.Q6J("ngIf",n.dailiesData.editModeActive),t.xp6(1),t.Q6J("ngIf",!n.dailiesData.editModeActive),t.xp6(2),t.Q6J("ngIf",n.allGroupsAreDisabled&&!n.dailiesData.editModeActive),t.xp6(1),t.Q6J("ngForOf",n.dailiesData.characters[n.dailiesData.selectedCharacterIndex].taskGroups))},dependencies:[l.sg,l.O5,g.G,u.H,f.R,_.t],styles:[".gamePageContent[_ngcontent-%COMP%]{position:relative;padding-bottom:8px;margin-bottom:8px}.disableMode[_ngcontent-%COMP%]{width:100px;height:50px}.dailyGroups[_ngcontent-%COMP%]{height:100%;max-width:828px;margin:0 auto;overflow:hidden;text-align:center}.timer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;margin:8px 0 0 8px;text-align:center;font-size:16px;padding:3px;border:2px solid var(--game-page-border-color)}.buttonWrapper[_ngcontent-%COMP%]{width:175px;margin:0 auto}.buttonWrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.buttonWrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{float:left}.buttonWrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right}.info[_ngcontent-%COMP%]{width:1130px;margin:8px auto;background-color:var(--game-page-background-color);border:1px solid var(--game-page-border-color);text-align:center}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:600px;text-align:center;margin:0 auto;padding-top:8px}.info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:8px}@media only screen and (max-width: 1635px){.info[_ngcontent-%COMP%]{float:left;margin:unset;margin-top:8px;margin-left:9px}}@media only screen and (max-width: 1391px){.info[_ngcontent-%COMP%]{width:calc(100% - 262px)}}@media only screen and (max-width: 1190px){.dailyGroups[_ngcontent-%COMP%]{max-width:552px}}@media only screen and (max-width: 576px){.dailyGroups[_ngcontent-%COMP%]{max-width:276px}}@media only screen and (max-width: 813px){.info[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px;width:calc(100% - 18px)}}"]})}return i})()}];let y=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.oAB({type:i});static#a=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(k),d.Bz]})}return i})();var b=s(32459),m=s(79001);let S=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.oAB({type:i});static#a=this.\u0275inj=t.cJS({imports:[l.ez,y,b.C,m.m,m.m]})}return i})()}}]);