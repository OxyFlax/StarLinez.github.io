(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Dp0H:function(e,t,a){"use strict";a.r(t),a.d(t,"MaplestoryDailiesV2Module",function(){return S});var s=a("ofXK"),i=a("tyNb"),r=a("5uKv"),n=a("fXoL"),o=a("jhN1"),l=a("/SLC"),c=a("kN8N"),d=a("Iwn8"),h=a("Ajqu");function p(e,t){if(1&e){const e=n.Mb();n.Lb(0,"div",8),n.Lb(1,"p"),n.mc(2,"I recently made changed to the dailies tracker. Due to some unforseen issues it could be that the saved data wasn't converted properly. If you are experiencing issues press the reset button to reset the saved data. If you are not experiencing any issues click on the dismiss buton to remove this message."),n.Kb(),n.Lb(3,"button",9),n.Sb("click",function(){return n.hc(e),n.Vb().infoReset()}),n.mc(4,"Reset Data"),n.Kb(),n.Lb(5,"button",9),n.Sb("click",function(){return n.hc(e),n.Vb().infoDismiss()}),n.mc(6,"Dismiss"),n.Kb(),n.Kb()}}function g(e,t){if(1&e){const e=n.Mb();n.Lb(0,"app-task-topbar-default",10),n.Sb("changeEvent",function(){return n.hc(e),n.Vb().changeHandler()}),n.Kb()}if(2&e){const e=n.Vb();n.Yb("taskData",e.dailiesData)("topBarTitle","Daily Tracker")("editButtonTitle","Dailies")}}function m(e,t){if(1&e){const e=n.Mb();n.Lb(0,"app-task-topbar-editmode",11),n.Sb("changeEvent",function(){return n.hc(e),n.Vb().changeHandler()})("regionChangeEvent",function(){return n.hc(e),n.Vb().regionChangeHandler()}),n.Kb()}if(2&e){const e=n.Vb();n.Yb("taskData",e.dailiesData)("topBarTitle","Daily Tracker")("regions",e.regions)}}function u(e,t){if(1&e&&(n.Lb(0,"p",12),n.mc(1,"Reset in "),n.Hb(2,"br"),n.mc(3),n.Kb()),2&e){const e=n.Vb();n.wb(3),n.oc(" ",e.timerString,"")}}function f(e,t){1&e&&(n.Lb(0,"div"),n.mc(1,' All dailies are disabled, click on the "Edit Dailies" button to enable dailies. '),n.Kb())}function k(e,t){if(1&e){const e=n.Mb();n.Jb(0),n.Lb(1,"app-task-group",13),n.Sb("changeEvent",function(){return n.hc(e),n.Vb().changeHandler()}),n.Kb(),n.Ib()}if(2&e){const e=t.$implicit,a=n.Vb();n.wb(1),n.Yb("taskData",a.dailiesData)("taskGroup",e)("title",e.title)}}const b=[{path:"",component:(()=>{class e{constructor(e,t){this.titleService=e,this.metaService=t,this.characterIndex=0,this.regions=[{resetUtcOffset:0,name:"GMS"},{resetUtcOffset:8,name:"MSEA"},{resetUtcOffset:9,name:"KMS"}]}ngOnInit(){this.titleService.setTitle("Maplestory Dailies Tracker | Random Stuff"),this.metaService.updateTag({name:"description",content:"A dailies tracker for Maplestory to keep track of your completed daily tasks. Keep track of your dailies across multiple different characters."}),this.metaService.getTag("name='robots'")?this.metaService.updateTag({name:"robots",content:"index, follow"}):this.metaService.addTag({name:"robots",content:"index, follow"}),this.infoInit(),this.initialise()}ngOnDestroy(){this.timer&&clearInterval(this.timer)}initialise(){localStorage.getItem("dailiesData")?(this.dailiesData=JSON.parse(localStorage.getItem("dailiesData")),void 0===this.dailiesData.mapleRegion&&(this.dailiesData.mapleRegion={resetUtcOffset:0,name:"GMS"}),this.dailiesData.editModeActive=!1,this.updateChecker(),this.checkIfDataIsFromPreviousDay(),this.checkIfAllGroupsAreDisabled()):localStorage.getItem("dailies")?this.v1v2Updater():this.initiateDataSet(),this.startTimer()}v1v2Updater(){var e=[{resetUtcOffset:0,name:"GMS"},{resetUtcOffset:8,name:"MSEA"},{resetUtcOffset:9,name:"KMS"}],t={characters:[],version:localStorage.getItem("dailiesVersion")?localStorage.getItem("dailiesVersion"):"0",lastTrackerVisit:localStorage.getItem("lastMapleDailyTrackerVisit")?localStorage.getItem("lastMapleDailyTrackerVisit"):"0",selectedCharacterIndex:0,mapleRegion:localStorage.getItem("mapleRegion")?e[JSON.parse(localStorage.getItem("mapleRegion"))]:e[0],editModeActive:!1},a=JSON.parse(localStorage.getItem("dailies"));for(let s=0;s<a.length;s++)t.characters.push({characterName:a[s].characterName,taskGroups:[{title:"Daily Bosses",tasks:a[s].dailyBosses,allDisabled:!1},{title:"Daily Tasks",tasks:a[s].dailyTasks,allDisabled:!1},{title:"Arcane River Dailies",tasks:a[s].dailyArcaneRiver,allDisabled:!1}]});this.dailiesData=t,this.changeHandler(),localStorage.removeItem("dailiesVersion"),localStorage.removeItem("lastMapleDailyTrackerVisit"),localStorage.removeItem("dailies"),this.initialise()}initiateDataSet(){var e={characterName:"",taskGroups:[{title:"Daily Bosses",tasks:r.dailyBosses,allDisabled:!1},{title:"Daily Tasks",tasks:r.dailyTasks,allDisabled:!1},{title:"Arcane River Dailies",tasks:r.dailyArcaneRiver,allDisabled:!1}]},t={characters:[],version:r.version,lastTrackerVisit:Date.now().toString(),selectedCharacterIndex:0,mapleRegion:{resetUtcOffset:0,name:"GMS"},editModeActive:!1};for(let a=0;a<4;a++)e.characterName="Char"+(a+1),t.characters[a]=JSON.parse(JSON.stringify(e));this.dailiesData=t,this.changeHandler()}checkIfDataIsFromPreviousDay(){var e=this.calculateResetTime()-864e5;parseInt(this.dailiesData.lastTrackerVisit)<e&&this.resetCompletedValues(),this.dailiesData.lastTrackerVisit=Date.now().toString(),this.changeHandler()}updateChecker(){if(this.dailiesData.version!=r.version){var e=JSON.parse(JSON.stringify(this.dailiesData));this.initiateDataSet();var t=JSON.parse(JSON.stringify(this.dailiesData));for(let a=0;a<e.characters.length;a++){this.dailiesData.characters[a].characterName=e.characters[a].characterName;for(let s=0;s<this.dailiesData.characters[a].taskGroups.length;s++){this.dailiesData.characters[a].taskGroups[s].tasks=[];for(let i=0;i<e.characters[a].taskGroups[s].tasks.length;i++)if("custom"!=e.characters[a].taskGroups[s].tasks[i].type&&"Custom.png"!=e.characters[a].taskGroups[s].tasks[i].image)for(let r=0;r<t.characters[a].taskGroups[s].tasks.length;r++)e.characters[a].taskGroups[s].tasks[i].name==t.characters[a].taskGroups[s].tasks[r].name&&(this.dailiesData.characters[a].taskGroups[s].tasks.push({name:e.characters[a].taskGroups[s].tasks[i].name,image:t.characters[a].taskGroups[s].tasks[r].image,completed:e.characters[a].taskGroups[s].tasks[i].completed,enabled:e.characters[a].taskGroups[s].tasks[i].enabled,type:t.characters[a].taskGroups[s].tasks[r].type,displayCondition:t.characters[a].taskGroups[s].tasks[r].displayCondition}),t.characters[a].taskGroups[s].tasks.splice(r,1));else e.characters[a].taskGroups[s].tasks[i].type="custom","Custom.png"==e.characters[a].taskGroups[s].tasks[i].image&&(e.characters[a].taskGroups[s].tasks[i].image="assets/Games/Maplestory/Tracker/Custom.png"),this.dailiesData.characters[a].taskGroups[s].tasks.push(e.characters[a].taskGroups[s].tasks[i]);for(let e=0;e<t.characters[a].taskGroups[s].tasks.length;e++)this.dailiesData.characters[a].taskGroups[s].tasks.push({name:t.characters[a].taskGroups[s].tasks[e].name,image:t.characters[a].taskGroups[s].tasks[e].image,completed:t.characters[a].taskGroups[s].tasks[e].completed,enabled:t.characters[a].taskGroups[s].tasks[e].enabled,type:t.characters[a].taskGroups[s].tasks[e].type,displayCondition:t.characters[a].taskGroups[s].tasks[e].displayCondition})}}this.dailiesData.version=r.version,this.dailiesData.lastTrackerVisit=Date.now().toString(),this.dailiesData.selectedCharacterIndex=e.selectedCharacterIndex,this.dailiesData.mapleRegion=e.mapleRegion,this.changeHandler()}}startTimer(){clearInterval(this.timer);var e=this.calculateResetTime();this.calculateAndOutPutTime(e-(new Date).getTime()),this.timer=setInterval(()=>{var t=e-(new Date).getTime();this.calculateAndOutPutTime(t),t<0&&(clearInterval(this.timer),this.liveReset())},1e3)}calculateResetTime(){var e=new Date,t=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+1,0,0,0,0);return(t-=60*this.dailiesData.mapleRegion.resetUtcOffset*60*1e3)<e.getTime()&&(t+=864e5),t}calculateAndOutPutTime(e){if(e<0)this.timerString="RESET!";else{var t=Math.floor(e%864e5/36e5),a=Math.floor(e%36e5/6e4),s=Math.floor(e%6e4/1e3);this.timerString=t+"h "+a+"m "+("00"+s).slice(-2)+"s "}}liveReset(){this.resetCompletedValues(),this.startTimer(),this.dailiesData.lastTrackerVisit=(parseInt(Date.now().toString())+5e3).toString(),this.changeHandler()}resetCompletedValues(){this.dailiesData.characters.forEach(e=>{e.taskGroups.forEach(e=>{e.tasks.forEach(e=>{e.completed=!1})})})}changeHandler(){localStorage.setItem("dailiesData",JSON.stringify(this.dailiesData)),this.checkIfAllGroupsAreDisabled()}checkIfAllGroupsAreDisabled(){this.allGroupsAreDisabled=!this.dailiesData.characters[this.dailiesData.selectedCharacterIndex].taskGroups.some(e=>!e.allDisabled)}regionChangeHandler(){this.checkIfDataIsFromPreviousDay(),this.startTimer()}infoInit(){this.showInfo=!localStorage.getItem("dailiesInfoViewed")}infoReset(){localStorage.removeItem("dailies"),localStorage.removeItem("dailiesData"),localStorage.setItem("dailiesInfoViewed","yes"),this.showInfo=!1,this.initialise()}infoDismiss(){localStorage.setItem("dailiesInfoViewed","yes"),this.showInfo=!1}}return e.\u0275fac=function(t){return new(t||e)(n.Gb(o.c),n.Gb(o.b))},e.\u0275cmp=n.Ab({type:e,selectors:[["app-maplestory-dailies-v2"]],decls:9,vars:6,consts:[["class","info",4,"ngIf"],[1,"gamePageContent"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent",4,"ngIf"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent",4,"ngIf"],["class","timer",4,"ngIf"],[1,"dailyGroups"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"info"],[1,"buttonStyle",3,"click"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent"],[1,"timer"],[3,"taskData","taskGroup","title","changeEvent"]],template:function(e,t){1&e&&(n.Hb(0,"app-maplestory-side-navigation"),n.lc(1,p,7,0,"div",0),n.Lb(2,"div",1),n.lc(3,g,1,3,"app-task-topbar-default",2),n.lc(4,m,1,3,"app-task-topbar-editmode",3),n.lc(5,u,4,1,"p",4),n.Lb(6,"div",5),n.lc(7,f,2,0,"div",6),n.lc(8,k,2,3,"ng-container",7),n.Kb(),n.Kb()),2&e&&(n.wb(1),n.Yb("ngIf",t.showInfo),n.wb(2),n.Yb("ngIf",!t.dailiesData.editModeActive),n.wb(1),n.Yb("ngIf",t.dailiesData.editModeActive),n.wb(1),n.Yb("ngIf",!t.dailiesData.editModeActive),n.wb(2),n.Yb("ngIf",t.allGroupsAreDisabled&&!t.dailiesData.editModeActive),n.wb(1),n.Yb("ngForOf",t.dailiesData.characters[t.dailiesData.selectedCharacterIndex].taskGroups))},directives:[l.a,s.k,s.j,c.a,d.a,h.a],styles:[".gamePageContent[_ngcontent-%COMP%]{position:relative}.disableMode[_ngcontent-%COMP%]{width:100px;height:50px}.dailyGroups[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;text-align:center}.timer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;margin:8px 0 0 8px;text-align:center;font-size:16px;padding:3px;border:2px solid var(--game-page-border-color)}.buttonWrapper[_ngcontent-%COMP%]{width:175px;margin:0 auto}.buttonWrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.buttonWrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{float:left}.buttonWrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right}.info[_ngcontent-%COMP%]{width:1130px;background-color:var(--game-page-background-color);border:1px solid var(--game-page-border-color);margin:8px auto;text-align:center}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:600px;text-align:justify;margin:0 auto;padding-top:8px}.info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:8px}@media only screen and (max-width:1635px){.info[_ngcontent-%COMP%]{float:left;margin:unset;margin-top:8px;margin-left:9px}}@media only screen and (max-width:1391px){.info[_ngcontent-%COMP%]{width:calc(100% - 262px)}}@media only screen and (max-width:800px){.info[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px;width:calc(100% - 18px)}}"]}),e})()}];let D=(()=>{class e{}return e.\u0275mod=n.Eb({type:e}),e.\u0275inj=n.Db({factory:function(t){return new(t||e)},imports:[[i.d.forChild(b)],i.d]}),e})();var v=a("I9VR"),I=a("Svul");let S=(()=>{class e{}return e.\u0275mod=n.Eb({type:e}),e.\u0275inj=n.Db({factory:function(t){return new(t||e)},imports:[[s.b,D,v.a,I.a],I.a]}),e})()}}]);