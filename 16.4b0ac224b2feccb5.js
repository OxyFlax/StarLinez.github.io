"use strict";(self.webpackChunkRandomProject=self.webpackChunkRandomProject||[]).push([[16],{36016:(b,m,l)=>{l.r(m),l.d(m,{MaplestoryWeekliesV2Module:()=>G});var g=l(69808),k=l(69414),h=l(17841),t=l(72096),d=l(22313),u=l(65534),v=l(89019),y=l(32724),C=l(90873);function D(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"app-task-topbar-default",6),t.NdJ("changeEvent",function(){return t.CHM(e),t.oxw().changeHandler()}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("taskData",e.weekliesData)("topBarTitle","Weekly Tracker")("editButtonTitle","Weeklies")}}function w(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"app-task-topbar-editmode",7),t.NdJ("changeEvent",function(){return t.CHM(e),t.oxw().changeHandler()})("regionChangeEvent",function(){return t.CHM(e),t.oxw().regionChangeHandler()}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("taskData",e.weekliesData)("topBarTitle","Weekly Tracker")("regions",e.regions)}}function M(i,c){1&i&&(t.TgZ(0,"div"),t._uU(1,' All weeklies are disabled, click on the "Edit Weeklies" button to enable weeklies. '),t.qZA())}function _(i,c){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-task-group",8),t.NdJ("changeEvent",function(){return t.CHM(e),t.oxw().changeHandler()}),t.qZA(),t.BQk()}if(2&i){const e=c.$implicit,a=c.index,n=t.oxw();t.xp6(1),t.Q6J("taskData",n.weekliesData)("taskGroup",e)("title",e.title)("timerString",n.timerStrings[a])}}const T=[{path:"",component:(()=>{class i{constructor(e,a){this.titleService=e,this.metaService=a,this.characterIndex=0,this.timers=[],this.timerStrings=["",""],this.regions=[{resetUtcOffset:0,name:"GMS"},{resetUtcOffset:8,name:"MSEA"},{resetUtcOffset:9,name:"KMS"}]}ngOnInit(){this.titleService.setTitle("Maplestory Weeklies Tracker | Random Stuff"),this.metaService.updateTag({name:"description",content:"A weeklies tracker for Maplestory to keep track of your completed weekly tasks. Keep track of your weeklies across multiple different characters."}),this.metaService.getTag("name='robots'")?this.metaService.updateTag({name:"robots",content:"index, follow"}):this.metaService.addTag({name:"robots",content:"index, follow"}),this.initialise()}ngOnDestroy(){this.timers[0]&&clearInterval(this.timers[0]),this.timers[1]&&clearInterval(this.timers[1])}initialise(){localStorage.getItem("weekliesData")?(this.weekliesData=JSON.parse(localStorage.getItem("weekliesData")),void 0===this.weekliesData.mapleRegion&&(this.weekliesData.mapleRegion={resetUtcOffset:0,name:"GMS"}),this.weekliesData.editModeActive=!1,this.weeklyDataChecker(),this.updateChecker(),this.checkIfAllGroupsAreDisabled()):this.initiateDataSet(),this.startTimer(0),this.startTimer(1)}initiateDataSet(){var e={characterName:"",taskGroups:[{title:"Weekly Bosses",tasks:h.DH,allDisabled:!1},{title:"Weekly Tasks",tasks:h.dj,allDisabled:!1}]},a={characters:[],version:h.i8,lastTrackerVisit:Date.now().toString(),selectedCharacterIndex:0,mapleRegion:{resetUtcOffset:0,name:"GMS"},editModeActive:!1};for(let n=0;n<4;n++)e.characterName="Char"+(n+1),a.characters[n]=JSON.parse(JSON.stringify(e));this.weekliesData=a,this.changeHandler()}weeklyDataChecker(){var e=this.getPreviousDayOfWeek(4),a=this.getPreviousDayOfWeek(1),n=parseInt(this.weekliesData.lastTrackerVisit);n<e&&this.resetCompletedValues(0),n<a&&this.resetCompletedValues(1),this.weekliesData.lastTrackerVisit=Date.now().toString(),this.changeHandler()}getNextDayOfWeek(e){var a=new Date,n=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,0,0));n.setTime(n.getTime()+24*((7+e-n.getUTCDay()-1)%7+1)*60*60*1e3);var s=n.valueOf();return(s-=60*this.weekliesData.mapleRegion.resetUtcOffset*60*1e3)<a.getTime()&&(s+=6048e5),s}getPreviousDayOfWeek(e){return this.getNextDayOfWeek(e)-6048e5}updateChecker(){if(this.weekliesData.version!=h.i8){var e=JSON.parse(JSON.stringify(this.weekliesData));this.initiateDataSet();var a=JSON.parse(JSON.stringify(this.weekliesData));for(let s=0;s<e.characters.length;s++){this.weekliesData.characters[s].characterName=e.characters[s].characterName;for(let r=0;r<this.weekliesData.characters[s].taskGroups.length;r++){this.weekliesData.characters[s].taskGroups[r].tasks=[];for(let o=0;o<e.characters[s].taskGroups[r].tasks.length;o++)if("custom"!=e.characters[s].taskGroups[r].tasks[o].type&&"Custom.png"!=e.characters[s].taskGroups[r].tasks[o].image)for(let p=0;p<a.characters[s].taskGroups[r].tasks.length;p++)e.characters[s].taskGroups[r].tasks[o].name==a.characters[s].taskGroups[r].tasks[p].name&&(this.weekliesData.characters[s].taskGroups[r].tasks.push({name:e.characters[s].taskGroups[r].tasks[o].name,image:a.characters[s].taskGroups[r].tasks[p].image,completed:e.characters[s].taskGroups[r].tasks[o].completed,enabled:e.characters[s].taskGroups[r].tasks[o].enabled,type:a.characters[s].taskGroups[r].tasks[p].type,displayCondition:a.characters[s].taskGroups[r].tasks[p].displayCondition}),a.characters[s].taskGroups[r].tasks.splice(p,1));else e.characters[s].taskGroups[r].tasks[o].type="custom","Custom.png"==e.characters[s].taskGroups[r].tasks[o].image&&(e.characters[s].taskGroups[r].tasks[o].image="assets/Games/Maplestory/Tracker/Custom.png"),this.weekliesData.characters[s].taskGroups[r].tasks.push(e.characters[s].taskGroups[r].tasks[o]);for(let o=0;o<a.characters[s].taskGroups[r].tasks.length;o++)this.weekliesData.characters[s].taskGroups[r].tasks.push({name:a.characters[s].taskGroups[r].tasks[o].name,image:a.characters[s].taskGroups[r].tasks[o].image,completed:a.characters[s].taskGroups[r].tasks[o].completed,enabled:a.characters[s].taskGroups[r].tasks[o].enabled,type:a.characters[s].taskGroups[r].tasks[o].type,displayCondition:a.characters[s].taskGroups[r].tasks[o].displayCondition})}}this.weekliesData.version=h.i8,this.weekliesData.lastTrackerVisit=Date.now().toString(),this.weekliesData.selectedCharacterIndex=e.selectedCharacterIndex,this.weekliesData.mapleRegion=e.mapleRegion,this.changeHandler()}}startTimer(e){var a;clearInterval(this.timers[e]),a=this.getNextDayOfWeek(0==e?4:1),this.calculateAndOutPutTimes(a-(new Date).getTime(),e),this.timers[e]=setInterval(()=>{var n=a-(new Date).getTime();this.calculateAndOutPutTimes(n,e),n<0&&(clearInterval(this.timers[e]),this.liveReset(e))},1e3)}calculateAndOutPutTimes(e,a){if(e<0)this.timerStrings[a]="RESET!";else{var n=Math.floor(e/864e5),s=Math.floor(e%864e5/36e5),r=Math.floor(e%36e5/6e4),o=Math.floor(e%6e4/1e3);this.timerStrings[a]=n+"d "+s+"h "+r+"m "+("00"+o).slice(-2)+"s "}}liveReset(e){this.resetCompletedValues(e),this.startTimer(e),this.weekliesData.lastTrackerVisit=(parseInt(Date.now().toString())+5e3).toString(),this.changeHandler()}resetCompletedValues(e){this.weekliesData.characters.forEach(a=>{a.taskGroups[e].tasks.forEach(n=>{n.completed=!1})})}changeHandler(){localStorage.setItem("weekliesData",JSON.stringify(this.weekliesData)),this.checkIfAllGroupsAreDisabled()}checkIfAllGroupsAreDisabled(){this.allGroupsAreDisabled=!this.weekliesData.characters[this.weekliesData.selectedCharacterIndex].taskGroups.some(e=>!e.allDisabled)}regionChangeHandler(){this.weeklyDataChecker(),this.startTimer(0),this.startTimer(1)}infoInit(){this.showInfo=!localStorage.getItem("weekliesInfoViewed")}infoReset(){localStorage.removeItem("weeklies"),localStorage.removeItem("weekliesData"),localStorage.setItem("weekliesInfoViewed","yes"),this.showInfo=!1,this.initialise()}infoDismiss(){localStorage.setItem("weekliesInfoViewed","yes"),this.showInfo=!1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.Dx),t.Y36(d.h_))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-maplestory-weeklies-v2"]],decls:7,vars:4,consts:[[1,"gamePageContent"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent",4,"ngIf"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent",4,"ngIf"],[1,"dailyGroups"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent"],[3,"taskData","taskGroup","title","timerString","changeEvent"]],template:function(e,a){1&e&&(t._UZ(0,"app-maplestory-side-navigation"),t.TgZ(1,"div",0),t.YNc(2,D,1,3,"app-task-topbar-default",1),t.YNc(3,w,1,3,"app-task-topbar-editmode",2),t.TgZ(4,"div",3),t.YNc(5,M,2,0,"div",4),t.YNc(6,_,2,4,"ng-container",5),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",!a.weekliesData.editModeActive),t.xp6(1),t.Q6J("ngIf",a.weekliesData.editModeActive),t.xp6(2),t.Q6J("ngIf",a.allGroupsAreDisabled&&!a.weekliesData.editModeActive),t.xp6(1),t.Q6J("ngForOf",a.weekliesData.characters[a.weekliesData.selectedCharacterIndex].taskGroups))},directives:[u.G,g.O5,v.R,y.t,g.sg,C.H],styles:[".gamePageContent[_ngcontent-%COMP%]{position:relative}.taskGroupWrapper[_ngcontent-%COMP%]{display:inline-block;margin:0 7px;vertical-align:top}.taskGroupTitle[_ngcontent-%COMP%]{margin:0;font-size:20px;width:262px}.disableMode[_ngcontent-%COMP%]{width:100px;height:50px}.dailyGroups[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;text-align:center}.buttonWrapper[_ngcontent-%COMP%]{width:175px;margin:0 auto}.buttonWrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.buttonWrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{float:left}.buttonWrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right}.info[_ngcontent-%COMP%]{width:1130px;margin:8px auto;background-color:var(--game-page-background-color);border:1px solid var(--game-page-border-color);text-align:center}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:600px;text-align:justify;margin:0 auto;padding-top:8px}.info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:8px}@media only screen and (max-width: 1635px){.info[_ngcontent-%COMP%]{float:left;margin:unset;margin-top:8px;margin-left:9px}}@media only screen and (max-width: 1391px){.info[_ngcontent-%COMP%]{width:calc(100% - 262px)}}@media only screen and (max-width: 800px){.info[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px;width:calc(100% - 18px)}}"]}),i})()}];let x=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[k.Bz.forChild(T)],k.Bz]}),i})();var O=l(56928),f=l(24447);let G=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[g.ez,x,O.C,f.m],f.m]}),i})()}}]);