(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{Cafn:function(e,t,a){"use strict";a.r(t),a.d(t,"MaplestoryWeekliesV3Module",function(){return D});var n=a("ofXK"),i=a("tyNb"),s=a("RN3I"),r=a("fXoL"),l=a("jhN1"),o=a("tyAY"),d=a("/SLC"),u=a("kN8N"),p=a("Iwn8"),c=a("Ajqu");function g(e,t){if(1&e){const e=r.Pb();r.Ob(0,"div",7),r.Ob(1,"p"),r.qc(2,"The weeklies tracker has been updated!"),r.Kb(3,"br"),r.Kb(4,"br"),r.qc(5," Arcane river weeklies have been added based on the changes made in the recent Savior patch."),r.Kb(6,"br"),r.qc(7," Wongstaurant weeklies have been added, the different weekly events will automatically appear when they are live in-game."),r.Kb(8,"br"),r.Kb(9,"br"),r.qc(10," If you are experiencing issues press the reset button to reset your saved data, if everything is working you can press the dismiss button."),r.Kb(11,"br"),r.qc(12," If this does not resolve your issue please contact me on discord, my username is StarLines. "),r.Nb(),r.Ob(13,"button",8),r.Vb("click",function(){return r.lc(e),r.Yb().infoReset()}),r.qc(14,"Reset Data"),r.Nb(),r.Ob(15,"button",8),r.Vb("click",function(){return r.lc(e),r.Yb().infoDismiss()}),r.qc(16,"Dismiss"),r.Nb(),r.Nb()}}function m(e,t){if(1&e){const e=r.Pb();r.Ob(0,"app-task-topbar-default",9),r.Vb("changeEvent",function(){return r.lc(e),r.Yb().changeHandler()}),r.Nb()}if(2&e){const e=r.Yb();r.bc("taskData",e.weekliesData)("topBarTitle","Weekly Tracker")("editButtonTitle","Weeklies")}}function h(e,t){if(1&e){const e=r.Pb();r.Ob(0,"app-task-topbar-editmode",10),r.Vb("changeEvent",function(){return r.lc(e),r.Yb().changeHandler()})("regionChangeEvent",function(){return r.lc(e),r.Yb().regionChangeHandler()})("addCharacterEvent",function(){return r.lc(e),r.Yb().addCharacter()}),r.Nb()}if(2&e){const e=r.Yb();r.bc("taskData",e.weekliesData)("topBarTitle","Weekly Tracker")("regions",e.regions)}}function f(e,t){1&e&&(r.Ob(0,"div"),r.qc(1,' All weeklies are disabled, click on the "Edit Weeklies" button to enable weeklies. '),r.Nb())}function b(e,t){if(1&e){const e=r.Pb();r.Mb(0),r.Ob(1,"app-task-group",11),r.Vb("changeEvent",function(){return r.lc(e),r.Yb().changeHandler()}),r.Nb(),r.Lb()}if(2&e){const e=t.$implicit,a=t.index,n=r.Yb();r.zb(1),r.bc("taskData",n.weekliesData)("taskGroup",e)("title",e.title)("timerString",n.timerStrings[a])}}const k=[{path:"",component:(()=>{class e{constructor(e,t,a){this.titleService=e,this.metaService=t,this.taskService=a,this.initialisationComplete=!1,this.characterIndex=0,this.timers=[],this.timerStrings=["","",""],this.regions=[{resetUtcOffset:0,name:"GMS"},{resetUtcOffset:8,name:"MSEA"},{resetUtcOffset:9,name:"KMS"}]}ngOnInit(){this.titleService.setTitle("Maplestory Weeklies Tracker | Random Stuff"),this.metaService.updateTag({name:"description",content:"A weeklies tracker for Maplestory to keep track of your completed weekly tasks. Keep track of your weeklies across multiple different characters."}),this.metaService.getTag("name='robots'")?this.metaService.updateTag({name:"robots",content:"index, follow"}):this.metaService.addTag({name:"robots",content:"index, follow"}),this.initialise()}ngOnDestroy(){this.timers[0]&&clearInterval(this.timers[0]),this.timers[1]&&clearInterval(this.timers[1])}initialise(){localStorage.getItem("weekliesDataV3")?(this.weekliesData=JSON.parse(localStorage.getItem("weekliesDataV3")),void 0===this.weekliesData.mapleRegion&&(this.weekliesData.mapleRegion={resetUtcOffset:0,name:"GMS"}),this.weekliesData.editModeActive=!1,this.weeklyResetChecker(),this.updateChecker(),this.checkIfAllGroupsAreDisabled()):localStorage.getItem("weekliesData")?(this.weekliesData=this.taskService.v2v3Updater("weekliesData"),this.changeHandler(),this.initialise()):this.weekliesData=this.taskService.initiateDataSet(s,4),this.startTimer(0),this.startTimer(1),this.initialisationComplete=!0}weeklyResetChecker(){var e=this.calculateResetDayTime(4)-6048e5,t=this.calculateResetDayTime(1)-6048e5,a=parseInt(this.weekliesData.lastTrackerVisit);a<e&&this.taskService.resetCompletionIndex(this.weekliesData,0),a<t&&(this.taskService.resetCompletionIndex(this.weekliesData,1),this.taskService.resetCompletionIndex(this.weekliesData,2)),this.weekliesData.lastTrackerVisit=Date.now().toString(),this.changeHandler()}updateChecker(){this.weekliesData.version!=s.version&&(this.weekliesData=this.taskService.updateTaskStructure(this.weekliesData,s),this.changeHandler())}startTimer(e){var t;clearInterval(this.timers[e]),t=this.calculateResetDayTime(0==e?4:1),this.calculateAndOutPutTimes(t-(new Date).getTime(),e),this.timers[e]=setInterval(()=>{var a=t-(new Date).getTime();this.calculateAndOutPutTimes(a,e),a<0&&(clearInterval(this.timers[e]),this.liveReset(e))},1e3)}calculateResetDayTime(e){var t=new Date,a=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0,0));a.setTime(a.getTime()+24*((7+e-a.getUTCDay()-1)%7+1)*60*60*1e3);var n=a.valueOf();return(n-=60*this.weekliesData.mapleRegion.resetUtcOffset*60*1e3)<t.getTime()&&(n+=6048e5),n}calculateAndOutPutTimes(e,t){if(e<0)return this.timerStrings[t]="RESET!",void(1==t&&(this.timerStrings[2]="RESET!"));var a=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),i=Math.floor(e%36e5/6e4),s=Math.floor(e%6e4/1e3);this.timerStrings[t]=a+"d "+n+"h "+i+"m "+("00"+s).slice(-2)+"s ",1==t&&(this.timerStrings[2]=this.timerStrings[t])}liveReset(e){this.taskService.resetCompletionIndex(this.weekliesData,e),1==e&&this.taskService.resetCompletionIndex(this.weekliesData,2),this.startTimer(e),this.weekliesData.lastTrackerVisit=(parseInt(Date.now().toString())+5e3).toString(),this.changeHandler()}checkIfAllGroupsAreDisabled(){this.allGroupsAreDisabled=!this.weekliesData.characters[this.weekliesData.selectedCharacterIndex].taskGroups.some(e=>!e.allDisabled)}addCharacter(){this.taskService.addCharacter(this.weekliesData,s),this.changeHandler()}infoReset(){localStorage.removeItem("weeklies"),localStorage.removeItem("weekliesData"),localStorage.removeItem("weekliesDataV3"),this.initialise(),this.weekliesData.infoVisible=!0}infoDismiss(){this.weekliesData.infoVisible=!1,this.changeHandler()}changeHandler(){localStorage.setItem("weekliesDataV3",JSON.stringify(this.weekliesData)),this.checkIfAllGroupsAreDisabled()}regionChangeHandler(){this.weeklyResetChecker(),this.startTimer(0),this.startTimer(1)}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(l.c),r.Jb(l.b),r.Jb(o.a))},e.\u0275cmp=r.Db({type:e,selectors:[["app-maplestory-weeklies-v3"]],decls:8,vars:5,consts:[["class","info",4,"ngIf"],[1,"gamePageContent"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent",4,"ngIf"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent","addCharacterEvent",4,"ngIf"],[1,"dailyGroups"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"info"],[1,"buttonStyle",3,"click"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent","addCharacterEvent"],[3,"taskData","taskGroup","title","timerString","changeEvent"]],template:function(e,t){1&e&&(r.Kb(0,"app-maplestory-side-navigation"),r.pc(1,g,17,0,"div",0),r.Ob(2,"div",1),r.pc(3,m,1,3,"app-task-topbar-default",2),r.pc(4,h,1,3,"app-task-topbar-editmode",3),r.Ob(5,"div",4),r.pc(6,f,2,0,"div",5),r.pc(7,b,2,4,"ng-container",6),r.Nb(),r.Nb()),2&e&&(r.zb(1),r.bc("ngIf",!t.initialisationComplete||t.weekliesData.infoVisible),r.zb(2),r.bc("ngIf",!t.weekliesData.editModeActive),r.zb(1),r.bc("ngIf",t.weekliesData.editModeActive),r.zb(2),r.bc("ngIf",t.allGroupsAreDisabled&&!t.weekliesData.editModeActive),r.zb(1),r.bc("ngForOf",t.weekliesData.characters[t.weekliesData.selectedCharacterIndex].taskGroups))},directives:[d.a,n.k,n.j,u.a,p.a,c.a],styles:[".gamePageContent[_ngcontent-%COMP%]{position:relative;padding-bottom:8px;margin-bottom:8px}.taskGroupWrapper[_ngcontent-%COMP%]{display:inline-block;margin:0 7px;vertical-align:top}.taskGroupTitle[_ngcontent-%COMP%]{margin:0;font-size:20px;width:262px}.disableMode[_ngcontent-%COMP%]{width:100px;height:50px}.dailyGroups[_ngcontent-%COMP%]{height:100%;max-width:552px;margin:0 auto;overflow:hidden;text-align:center}.buttonWrapper[_ngcontent-%COMP%]{width:175px;margin:0 auto}.buttonWrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.buttonWrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{float:left}.buttonWrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right}.info[_ngcontent-%COMP%]{width:1130px;background-color:var(--game-page-background-color);border:1px solid var(--game-page-border-color);margin:8px auto}.info[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding-top:8px}.info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:8px}@media only screen and (max-width:1635px){.info[_ngcontent-%COMP%]{float:left;margin:unset;margin-top:8px;margin-left:9px}}@media only screen and (max-width:1391px){.info[_ngcontent-%COMP%]{width:calc(100% - 262px)}}@media only screen and (max-width:800px){.info[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px;width:calc(100% - 18px)}}@media only screen and (max-width:576px){.dailyGroups[_ngcontent-%COMP%]{max-width:276px}}"]}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({imports:[[i.d.forChild(k)],i.d]}),e})();var v=a("I9VR"),w=a("Svul");let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({imports:[[n.b,C,v.a,w.a],w.a]}),e})()},RN3I:function(e){e.exports=JSON.parse('{"version":"9.1","imagePrefix":"MapleWeeklies/","taskGroups":[{"title":"Weekly Bosses","tasks":[{"name":"Chaos Pink Bean","image":"ChaosPinkBean.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Hard Hilla","image":"HardHilla.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Cygnus","image":"Cygnus.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Zakum","image":"ChaosZakum.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Princess No","image":"PrincessNo.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Crimson Queen","image":"ChaosCrimsonQueen.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Pierre","image":"ChaosPierre.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Von Bon","image":"ChaosVonBon.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Vellum","image":"ChaosVellum.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Akechi Mitsuhide","image":"AkechiMitsuhide.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Hard Magnus","image":"HardMagnus.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Chaos Papulatus","image":"ChaosPapulatus.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Lotus","image":"Lotus.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Damien","image":"Damien.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Guardian Angel Slime","image":"GuardianAngelSlime.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Lucid","image":"Lucid.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Will","image":"Will.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Gloom","image":"Gloom.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Verus Hilla","image":"VerusHilla.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Darknell","image":"Darknell.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Wongstaurant Boss Coin Capping","image":"Event/Savior/BossCoin.png","done":false,"enabled":true,"type":"default","dispCon":"new Date().getTime() < 1693353599000"}],"allDisabled":false},{"title":"Weekly Tasks","tasks":[{"name":"Guild Buff","image":"GuildBuff.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Scrapyard","image":"Scrapyard.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Dark World Tree","image":"Dark World Tree.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Mu Lung Dojo","image":"MuLungDojo.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Kritias","image":"Kritias.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Flag Race","image":"FlagRace.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Sharenian Culvert","image":"SharenianCulvert.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Wongstaurant Cheer Up Weekly","image":"Event/Savior/Wonky.png","done":false,"enabled":true,"type":"default","dispCon":"new Date().getTime() > 1688515200000 && new Date().getTime() < 1689119999000"}],"allDisabled":false},{"title":"Arcane River Weeklies","tasks":[{"name":"Erda Spectrum","image":"ErdaSpectrum.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Hungry Muto","image":"HungryMuto.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Midnight Chaser","image":"MidnightChaser.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Spirit Saviour","image":"SpiritSaviour.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Ranheim Defense","image":"RanheimDefense.png","done":false,"enabled":true,"type":"default","dispCon":"true"},{"name":"Esfera Guardian","image":"EsferaGuardian.png","done":false,"enabled":true,"type":"default","dispCon":"true"}],"allDisabled":false}]}')}}]);