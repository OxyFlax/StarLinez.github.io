(self.webpackChunkrandom_project=self.webpackChunkrandom_project||[]).push([[270],{39270:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GenshinWeekliesModule:()=>x});var s=a(38583),i=a(32086);const n=JSON.parse('{"i":"1.0","d":[{"name":"Golden House","image":"GenshinWeeklies/GoldenHouse.png","completed":false,"enabled":true,"type":"default","displayCondition":"true"},{"name":"Storm Terror","image":"GenshinWeeklies/StormTerror.png","completed":false,"enabled":true,"type":"default","displayCondition":"true"},{"name":"Weekly Bounty","image":"GenshinWeeklies/WeeklyBounty.jpg","completed":false,"enabled":true,"type":"default","displayCondition":"true"},{"name":"Weekly Request","image":"GenshinWeeklies/WeeklyRequest.png","completed":false,"enabled":true,"type":"default","displayCondition":"true"},{"name":"Wolf of the North","image":"GenshinWeeklies/WolfOfTheNorth.jpg","completed":false,"enabled":true,"type":"default","displayCondition":"true"}]}');var r=a(10639),o=a(39075),l=a(92639),c=a(89019),h=a(32724),p=a(90873);function g(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"app-task-topbar-default",7),r.NdJ("changeEvent",function(){return r.CHM(e),r.oxw().changeHandler()}),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("taskData",e.genshinWeekliesData)("topBarTitle","Weekly Tracker")("editButtonTitle","Weeklies")}}function d(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"app-task-topbar-editmode",8),r.NdJ("changeEvent",function(){return r.CHM(e),r.oxw().changeHandler()})("regionChangeEvent",function(){return r.CHM(e),r.oxw().regionChangeHandler()}),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("taskData",e.genshinWeekliesData)("topBarTitle","Weekly Tracker")("regions",e.regions)}}function k(e,t){if(1&e&&(r.TgZ(0,"p",9),r._uU(1,"Reset in "),r._UZ(2,"br"),r._uU(3),r.qZA()),2&e){const e=r.oxw();r.xp6(3),r.hij(" ",e.timerString,"")}}function u(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1,' All weeklies are disabled, click on the "Edit Weeklies" button to enable weeklies. '),r.qZA())}function m(e,t){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"app-task-group",10),r.NdJ("changeEvent",function(){return r.CHM(e),r.oxw().changeHandler()}),r.qZA(),r.BQk()}if(2&e){const e=t.$implicit,a=r.oxw();r.xp6(1),r.Q6J("taskData",a.genshinWeekliesData)("taskGroup",e)("title",e.title)}}const f=[{path:"",component:(()=>{class e{constructor(e,t){this.titleService=e,this.metaService=t,this.characterIndex=0,this.regions=[{resetUtcOffset:-9,name:"NA"},{resetUtcOffset:-3,name:"EU"},{resetUtcOffset:4,name:"ASIA"}]}ngOnInit(){this.titleService.setTitle("Genshin Impact Weeklies Tracker | Random Stuff"),this.metaService.updateTag({name:"description",content:"A weeklies tracker for Genshin Impact to keep track of your completed weekly tasks. Keep track of your weeklies across multiple different characters."}),this.metaService.getTag("name='robots'")?this.metaService.updateTag({name:"robots",content:"index, follow"}):this.metaService.addTag({name:"robots",content:"index, follow"}),this.initialise()}ngOnDestroy(){this.timer&&clearInterval(this.timer)}initialise(){localStorage.getItem("genshinWeekliesData")?(this.genshinWeekliesData=JSON.parse(localStorage.getItem("genshinWeekliesData")),this.genshinWeekliesData.editModeActive=!1,this.updateChecker(),this.checkIfDataIsFromPreviousWeek(),this.checkIfAllGroupsAreDisabled()):this.initiateDataSet(),this.startTimer()}initiateDataSet(){var e={characterName:"",taskGroups:[{title:"Weekly Tasks",tasks:n.d,allDisabled:!1}]},t={characters:[],version:n.i,lastTrackerVisit:Date.now().toString(),selectedCharacterIndex:0,mapleRegion:{resetUtcOffset:-9,name:"US"},editModeActive:!1};for(let a=0;a<4;a++)e.characterName="Char"+(a+1),t.characters[a]=JSON.parse(JSON.stringify(e));this.genshinWeekliesData=t,this.changeHandler()}checkIfDataIsFromPreviousWeek(){var e=this.getPreviousDayOfWeek(1);parseInt(this.genshinWeekliesData.lastTrackerVisit)<e&&this.resetCompletedValues(),this.genshinWeekliesData.lastTrackerVisit=Date.now().toString(),this.changeHandler()}getNextDayOfWeek(e){var t=new Date,a=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0,0));a.setTime(a.getTime()+24*((7+e-a.getUTCDay()-1)%7+1)*60*60*1e3);var s=a.valueOf();return(s-=60*this.genshinWeekliesData.mapleRegion.resetUtcOffset*60*1e3)<t.getTime()&&(s+=6048e5),s}getPreviousDayOfWeek(e){return this.getNextDayOfWeek(e)-6048e5}updateChecker(){if(this.genshinWeekliesData.version!=n.i){var e=JSON.parse(JSON.stringify(this.genshinWeekliesData));this.initiateDataSet();var t=JSON.parse(JSON.stringify(this.genshinWeekliesData));for(let a=0;a<e.characters.length;a++){this.genshinWeekliesData.characters[a].characterName=e.characters[a].characterName;for(let s=0;s<this.genshinWeekliesData.characters[a].taskGroups.length;s++){this.genshinWeekliesData.characters[a].taskGroups[s].tasks=[];for(let i=0;i<e.characters[a].taskGroups[s].tasks.length;i++)if("custom"!=e.characters[a].taskGroups[s].tasks[i].type&&"Custom.png"!=e.characters[a].taskGroups[s].tasks[i].image)for(let n=0;n<t.characters[a].taskGroups[s].tasks.length;n++)e.characters[a].taskGroups[s].tasks[i].name==t.characters[a].taskGroups[s].tasks[n].name&&(this.genshinWeekliesData.characters[a].taskGroups[s].tasks.push({name:e.characters[a].taskGroups[s].tasks[i].name,image:t.characters[a].taskGroups[s].tasks[n].image,completed:e.characters[a].taskGroups[s].tasks[i].completed,enabled:e.characters[a].taskGroups[s].tasks[i].enabled,type:t.characters[a].taskGroups[s].tasks[n].type,displayCondition:t.characters[a].taskGroups[s].tasks[n].displayCondition}),t.characters[a].taskGroups[s].tasks.splice(n,1));else this.genshinWeekliesData.characters[a].taskGroups[s].tasks.push(e.characters[a].taskGroups[s].tasks[i]);for(let e=0;e<t.characters[a].taskGroups[s].tasks.length;e++)this.genshinWeekliesData.characters[a].taskGroups[s].tasks.push({name:t.characters[a].taskGroups[s].tasks[e].name,image:t.characters[a].taskGroups[s].tasks[e].image,completed:t.characters[a].taskGroups[s].tasks[e].completed,enabled:t.characters[a].taskGroups[s].tasks[e].enabled,type:t.characters[a].taskGroups[s].tasks[e].type,displayCondition:t.characters[a].taskGroups[s].tasks[e].displayCondition})}}this.genshinWeekliesData.version=n.i,this.genshinWeekliesData.lastTrackerVisit=Date.now().toString(),this.genshinWeekliesData.selectedCharacterIndex=e.selectedCharacterIndex,this.genshinWeekliesData.mapleRegion=e.mapleRegion,this.changeHandler()}}startTimer(){clearInterval(this.timer);var e=this.getNextDayOfWeek(1);this.calculateAndOutPutTimes(e-(new Date).getTime()),this.timer=setInterval(()=>{var t=e-(new Date).getTime();this.calculateAndOutPutTimes(t),t<0&&(clearInterval(this.timer),this.liveReset())},1e3)}calculateAndOutPutTimes(e){if(e<0)this.timerString="RESET!";else{var t=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),s=Math.floor(e%36e5/6e4),i=Math.floor(e%6e4/1e3);this.timerString=t+"d "+a+"h "+s+"m "+("00"+i).slice(-2)+"s "}}liveReset(){this.resetCompletedValues(),this.startTimer(),this.genshinWeekliesData.lastTrackerVisit=(parseInt(Date.now().toString())+5e3).toString(),this.changeHandler()}resetCompletedValues(){this.genshinWeekliesData.characters.forEach(e=>{e.taskGroups.forEach(e=>{e.tasks.forEach(e=>{e.completed=!1})})})}changeHandler(){localStorage.setItem("genshinWeekliesData",JSON.stringify(this.genshinWeekliesData)),this.checkIfAllGroupsAreDisabled()}checkIfAllGroupsAreDisabled(){this.allGroupsAreDisabled=!this.genshinWeekliesData.characters[this.genshinWeekliesData.selectedCharacterIndex].taskGroups.some(e=>!e.allDisabled)}regionChangeHandler(){this.checkIfDataIsFromPreviousWeek(),this.startTimer()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(o.Dx),r.Y36(o.h_))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-genshin-weeklies"]],decls:8,vars:5,consts:[[1,"editedGamePageContent"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent",4,"ngIf"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent",4,"ngIf"],["class","timer",4,"ngIf"],[1,"dailyGroups"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent"],[1,"timer"],[3,"taskData","taskGroup","title","changeEvent"]],template:function(e,t){1&e&&(r._UZ(0,"app-genshin-side-navigation"),r.TgZ(1,"div",0),r.YNc(2,g,1,3,"app-task-topbar-default",1),r.YNc(3,d,1,3,"app-task-topbar-editmode",2),r.YNc(4,k,4,1,"p",3),r.TgZ(5,"div",4),r.YNc(6,u,2,0,"div",5),r.YNc(7,m,2,3,"ng-container",6),r.qZA(),r.qZA()),2&e&&(r.xp6(2),r.Q6J("ngIf",!t.genshinWeekliesData.editModeActive),r.xp6(1),r.Q6J("ngIf",t.genshinWeekliesData.editModeActive),r.xp6(1),r.Q6J("ngIf",!t.genshinWeekliesData.editModeActive),r.xp6(2),r.Q6J("ngIf",t.allGroupsAreDisabled&&!t.genshinWeekliesData.editModeActive),r.xp6(1),r.Q6J("ngForOf",t.genshinWeekliesData.characters[t.genshinWeekliesData.selectedCharacterIndex].taskGroups))},directives:[l.O,s.O5,s.sg,c.R,h.t,p.H],styles:[".editedGamePageContent[_ngcontent-%COMP%]{position:relative;width:650px;background-color:var(--game-page-background-color);border:1px solid var(--game-page-border-color);min-height:calc(100vh - 72px);margin:8px auto 0;padding-top:15px}.taskGroupWrapper[_ngcontent-%COMP%]{display:inline-block;margin:0 7px;vertical-align:top}.taskGroupTitle[_ngcontent-%COMP%]{margin:0;font-size:20px;width:262px}.disableMode[_ngcontent-%COMP%]{width:100px;height:50px}.dailyGroups[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;text-align:center}.timer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;margin:8px 0 0 8px;text-align:center;font-size:16px;padding:3px;border:2px solid var(--game-page-border-color)}.buttonWrapper[_ngcontent-%COMP%]{width:175px;margin:0 auto}.buttonWrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.buttonWrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{float:left}.buttonWrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right}@media only screen and (max-width:1157px){.editedGamePageContent[_ngcontent-%COMP%]{float:left;margin:unset;margin-top:8px;margin-left:9px}}@media only screen and (max-width:912px){.editedGamePageContent[_ngcontent-%COMP%]{width:calc(100% - 262px)}}@media only screen and (max-width:800px){.editedGamePageContent[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px;min-height:calc(100vh - 100px);width:calc(100% - 18px)}}"]}),e})()}];let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[i.Bz.forChild(f)],i.Bz]}),e})();var W=a(29091),v=a(24447);let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[s.ez,D,W.Z,v.m],v.m]}),e})()}}]);