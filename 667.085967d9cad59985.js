"use strict";(self.webpackChunkRandomProject=self.webpackChunkRandomProject||[]).push([[667],{12667:(I,d,l)=>{l.r(d),l.d(d,{GenshinWeekliesModule:()=>M});var g=l(69808),m=l(69414);const h=JSON.parse('{"i":"1.0","d":[{"name":"Golden House","image":"GenshinWeeklies/GoldenHouse.png","completed":false,"enabled":true,"type":"default","displayCondition":"true"},{"name":"Storm Terror","image":"GenshinWeeklies/StormTerror.png","completed":false,"enabled":true,"type":"default","displayCondition":"true"},{"name":"Weekly Bounty","image":"GenshinWeeklies/WeeklyBounty.jpg","completed":false,"enabled":true,"type":"default","displayCondition":"true"},{"name":"Weekly Request","image":"GenshinWeeklies/WeeklyRequest.png","completed":false,"enabled":true,"type":"default","displayCondition":"true"},{"name":"Wolf of the North","image":"GenshinWeeklies/WolfOfTheNorth.jpg","completed":false,"enabled":true,"type":"default","displayCondition":"true"}]}');var e=l(72096),k=l(22313),f=l(92639),v=l(89019),C=l(32724),_=l(90873);function D(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"app-task-topbar-default",7),e.NdJ("changeEvent",function(){return e.CHM(t),e.oxw().changeHandler()}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("taskData",t.genshinWeekliesData)("topBarTitle","Weekly Tracker")("editButtonTitle","Weeklies")}}function x(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"app-task-topbar-editmode",8),e.NdJ("changeEvent",function(){return e.CHM(t),e.oxw().changeHandler()})("regionChangeEvent",function(){return e.CHM(t),e.oxw().regionChangeHandler()}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("taskData",t.genshinWeekliesData)("topBarTitle","Weekly Tracker")("regions",t.regions)}}function W(n,c){if(1&n&&(e.TgZ(0,"p",9),e._uU(1,"Reset in "),e._UZ(2,"br"),e._uU(3),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",t.timerString,"")}}function T(n,c){1&n&&(e.TgZ(0,"div"),e._uU(1,' All weeklies are disabled, click on the "Edit Weeklies" button to enable weeklies. '),e.qZA())}function y(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-task-group",10),e.NdJ("changeEvent",function(){return e.CHM(t),e.oxw().changeHandler()}),e.qZA(),e.BQk()}if(2&n){const t=c.$implicit,a=e.oxw();e.xp6(1),e.Q6J("taskData",a.genshinWeekliesData)("taskGroup",t)("title",t.title)}}const G=[{path:"",component:(()=>{class n{constructor(t,a){this.titleService=t,this.metaService=a,this.characterIndex=0,this.regions=[{resetUtcOffset:-9,name:"NA"},{resetUtcOffset:-3,name:"EU"},{resetUtcOffset:4,name:"ASIA"}]}ngOnInit(){this.titleService.setTitle("Genshin Impact Weeklies Tracker | Random Stuff"),this.metaService.updateTag({name:"description",content:"A weeklies tracker for Genshin Impact to keep track of your completed weekly tasks. Keep track of your weeklies across multiple different characters."}),this.metaService.getTag("name='robots'")?this.metaService.updateTag({name:"robots",content:"index, follow"}):this.metaService.addTag({name:"robots",content:"index, follow"}),this.initialise()}ngOnDestroy(){this.timer&&clearInterval(this.timer)}initialise(){localStorage.getItem("genshinWeekliesData")?(this.genshinWeekliesData=JSON.parse(localStorage.getItem("genshinWeekliesData")),this.genshinWeekliesData.editModeActive=!1,this.updateChecker(),this.checkIfDataIsFromPreviousWeek(),this.checkIfAllGroupsAreDisabled()):this.initiateDataSet(),this.startTimer()}initiateDataSet(){var t={characterName:"",taskGroups:[{title:"Weekly Tasks",tasks:h.d,allDisabled:!1}]},a={characters:[],version:h.i,lastTrackerVisit:Date.now().toString(),selectedCharacterIndex:0,mapleRegion:{resetUtcOffset:-9,name:"US"},editModeActive:!1};for(let r=0;r<4;r++)t.characterName="Char"+(r+1),a.characters[r]=JSON.parse(JSON.stringify(t));this.genshinWeekliesData=a,this.changeHandler()}checkIfDataIsFromPreviousWeek(){var t=this.getPreviousDayOfWeek(1);parseInt(this.genshinWeekliesData.lastTrackerVisit)<t&&this.resetCompletedValues(),this.genshinWeekliesData.lastTrackerVisit=Date.now().toString(),this.changeHandler()}getNextDayOfWeek(t){var a=new Date,r=new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,0,0));r.setTime(r.getTime()+24*((7+t-r.getUTCDay()-1)%7+1)*60*60*1e3);var s=r.valueOf();return(s-=60*this.genshinWeekliesData.mapleRegion.resetUtcOffset*60*1e3)<a.getTime()&&(s+=6048e5),s}getPreviousDayOfWeek(t){return this.getNextDayOfWeek(t)-6048e5}updateChecker(){if(this.genshinWeekliesData.version!=h.i){var t=JSON.parse(JSON.stringify(this.genshinWeekliesData));this.initiateDataSet();var a=JSON.parse(JSON.stringify(this.genshinWeekliesData));for(let s=0;s<t.characters.length;s++){this.genshinWeekliesData.characters[s].characterName=t.characters[s].characterName;for(let i=0;i<this.genshinWeekliesData.characters[s].taskGroups.length;i++){this.genshinWeekliesData.characters[s].taskGroups[i].tasks=[];for(let o=0;o<t.characters[s].taskGroups[i].tasks.length;o++)if("custom"!=t.characters[s].taskGroups[i].tasks[o].type&&"Custom.png"!=t.characters[s].taskGroups[i].tasks[o].image)for(let p=0;p<a.characters[s].taskGroups[i].tasks.length;p++)t.characters[s].taskGroups[i].tasks[o].name==a.characters[s].taskGroups[i].tasks[p].name&&(this.genshinWeekliesData.characters[s].taskGroups[i].tasks.push({name:t.characters[s].taskGroups[i].tasks[o].name,image:a.characters[s].taskGroups[i].tasks[p].image,completed:t.characters[s].taskGroups[i].tasks[o].completed,enabled:t.characters[s].taskGroups[i].tasks[o].enabled,type:a.characters[s].taskGroups[i].tasks[p].type,displayCondition:a.characters[s].taskGroups[i].tasks[p].displayCondition}),a.characters[s].taskGroups[i].tasks.splice(p,1));else this.genshinWeekliesData.characters[s].taskGroups[i].tasks.push(t.characters[s].taskGroups[i].tasks[o]);for(let o=0;o<a.characters[s].taskGroups[i].tasks.length;o++)this.genshinWeekliesData.characters[s].taskGroups[i].tasks.push({name:a.characters[s].taskGroups[i].tasks[o].name,image:a.characters[s].taskGroups[i].tasks[o].image,completed:a.characters[s].taskGroups[i].tasks[o].completed,enabled:a.characters[s].taskGroups[i].tasks[o].enabled,type:a.characters[s].taskGroups[i].tasks[o].type,displayCondition:a.characters[s].taskGroups[i].tasks[o].displayCondition})}}this.genshinWeekliesData.version=h.i,this.genshinWeekliesData.lastTrackerVisit=Date.now().toString(),this.genshinWeekliesData.selectedCharacterIndex=t.selectedCharacterIndex,this.genshinWeekliesData.mapleRegion=t.mapleRegion,this.changeHandler()}}startTimer(){clearInterval(this.timer);var t=this.getNextDayOfWeek(1);this.calculateAndOutPutTimes(t-(new Date).getTime()),this.timer=setInterval(()=>{var a=t-(new Date).getTime();this.calculateAndOutPutTimes(a),a<0&&(clearInterval(this.timer),this.liveReset())},1e3)}calculateAndOutPutTimes(t){if(t<0)this.timerString="RESET!";else{var a=Math.floor(t/864e5),r=Math.floor(t%864e5/36e5),s=Math.floor(t%36e5/6e4),i=Math.floor(t%6e4/1e3);this.timerString=a+"d "+r+"h "+s+"m "+("00"+i).slice(-2)+"s "}}liveReset(){this.resetCompletedValues(),this.startTimer(),this.genshinWeekliesData.lastTrackerVisit=(parseInt(Date.now().toString())+5e3).toString(),this.changeHandler()}resetCompletedValues(){this.genshinWeekliesData.characters.forEach(t=>{t.taskGroups.forEach(a=>{a.tasks.forEach(r=>{r.completed=!1})})})}changeHandler(){localStorage.setItem("genshinWeekliesData",JSON.stringify(this.genshinWeekliesData)),this.checkIfAllGroupsAreDisabled()}checkIfAllGroupsAreDisabled(){this.allGroupsAreDisabled=!this.genshinWeekliesData.characters[this.genshinWeekliesData.selectedCharacterIndex].taskGroups.some(t=>!t.allDisabled)}regionChangeHandler(){this.checkIfDataIsFromPreviousWeek(),this.startTimer()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(k.Dx),e.Y36(k.h_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-genshin-weeklies"]],decls:8,vars:5,consts:[[1,"editedGamePageContent"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent",4,"ngIf"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent",4,"ngIf"],["class","timer",4,"ngIf"],[1,"dailyGroups"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"taskData","topBarTitle","editButtonTitle","changeEvent"],[3,"taskData","topBarTitle","regions","changeEvent","regionChangeEvent"],[1,"timer"],[3,"taskData","taskGroup","title","changeEvent"]],template:function(t,a){1&t&&(e._UZ(0,"app-genshin-side-navigation"),e.TgZ(1,"div",0),e.YNc(2,D,1,3,"app-task-topbar-default",1),e.YNc(3,x,1,3,"app-task-topbar-editmode",2),e.YNc(4,W,4,1,"p",3),e.TgZ(5,"div",4),e.YNc(6,T,2,0,"div",5),e.YNc(7,y,2,3,"ng-container",6),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",!a.genshinWeekliesData.editModeActive),e.xp6(1),e.Q6J("ngIf",a.genshinWeekliesData.editModeActive),e.xp6(1),e.Q6J("ngIf",!a.genshinWeekliesData.editModeActive),e.xp6(2),e.Q6J("ngIf",a.allGroupsAreDisabled&&!a.genshinWeekliesData.editModeActive),e.xp6(1),e.Q6J("ngForOf",a.genshinWeekliesData.characters[a.genshinWeekliesData.selectedCharacterIndex].taskGroups))},directives:[f.O,g.O5,v.R,C.t,g.sg,_.H],styles:[".editedGamePageContent[_ngcontent-%COMP%]{position:relative;width:650px;margin:8px auto 0;background-color:var(--game-page-background-color);border:1px solid var(--game-page-border-color);min-height:calc(100vh - 72px);padding-top:15px}.taskGroupWrapper[_ngcontent-%COMP%]{display:inline-block;margin:0 7px;vertical-align:top}.taskGroupTitle[_ngcontent-%COMP%]{margin:0;font-size:20px;width:262px}.disableMode[_ngcontent-%COMP%]{width:100px;height:50px}.dailyGroups[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden;text-align:center}.timer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;margin:8px 0 0 8px;text-align:center;font-size:16px;padding:3px;border:2px solid var(--game-page-border-color)}.buttonWrapper[_ngcontent-%COMP%]{width:175px;margin:0 auto}.buttonWrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.buttonWrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{float:left}.buttonWrapper[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right}@media only screen and (max-width: 1157px){.editedGamePageContent[_ngcontent-%COMP%]{float:left;margin:unset;margin-top:8px;margin-left:9px}}@media only screen and (max-width: 912px){.editedGamePageContent[_ngcontent-%COMP%]{width:calc(100% - 262px)}}@media only screen and (max-width: 800px){.editedGamePageContent[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px;min-height:calc(100vh - 100px);width:calc(100% - 18px)}}"]}),n})()}];let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.Bz.forChild(G)],m.Bz]}),n})();var b=l(29091),u=l(24447);let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.ez,O,b.Z,u.m],u.m]}),n})()}}]);